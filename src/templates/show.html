{% extends "base.html" %}
{% block add_head %}
	<link rel="stylesheet" type="text/css" href="{{css_path}}jquery.countdown.css">

	<script src="{{js_path}}jquery.playSound.js"></script>
	<script src="{{js_path}}jquery.plugin.min.js"></script>
	<script src="{{js_path}}jquery.countdown.min.js"></script>
	
	<script>{% include "show_poll_js.html" %}</script>
{% endblock %}
{% block content %}
	<div class="container-fluid">
		{% if show.running %}
			{% include "show_voting.html" %}
		{% endif %}
		{% if show.is_today and is_admin and not show.running and not show.start_time_tz %}		
			<div class="row">
				<div class="col-md-4 col-md-offset-4 text-center">
					<h1>Choose Your Own Improventure</h1>
				</div>
			</div>
			<div class="row">
				<div class="col-md-4 col-md-offset-4">
					<form action="/show/{{show.key.id}}/" method="post">
						<input type="hidden" name="start_show" value="True">
						{% if available_actions >= show.player_actions|length %}
							<input type="submit" class="btn btn-info btn-block" style="background-color:#003D7A;" value="Start the Show!">
						{% else %}
							<h1>Need more actions for show to start!</h1>
						{% endif %}
					</form>
				</div>
			</div>
		{% endif %}
		{% if show.is_today and not is_admin and not show.running %}		
			Show starts: {{show.scheduled}}
		{% endif %}
		{% if show.is_today and is_admin and not show.running and show.start_time_tz %}
			<h1>Hope you enjoyed the show!</h1>
		{% endif %}
		{% if show.in_future %}
			<div class="row">
				<div class="col-md-6 col-md-offset-2">
					<div class="btn btn-success btn-block btn-lg header-btn">{{show.scheduled|date:"l N jS, Y @ P"}}{% if show.theme %}<br/>Theme: {{show.theme}}{% endif %}</div>
				</div>
			</div>
			<div class="row">
				&nbsp;
			</div>
			<div class="row">
				<div class="col-md-6 col-md-offset-2">
					<div class="btn btn-warning btn-block btn-lg header-btn">Players</div>
				</div>
			</div>
			<div class="row">
				&nbsp;
			</div>
			<div class="row">
				<div class="col-sm-1 col-sm-offset-1">
					&nbsp;
				</div>
				{% for player in show.players %}
					{% if forloop.counter|divisibleby:"4" %}
					</div>
					<div class="row">
						<div class="col-sm-1 col-sm-offset-1">
							&nbsp;
						</div>
					{% endif %}
					<div class="col-sm-2"> 
						<div class="panel panel-info">
							<div class="panel-body">
								<img src="{{player_image_path}}{{player.photo_filename}}" alt="{{player.name}}" class="img-responsive img-thumbnail">
							</div>
							<div class="panel-footer text-center" style="background-color:black;">{{player.name}}</div>
						</div>
					</div>
				{% endfor %}
			</div>
		{% endif %}
		{% if show.in_past %}
			<div class="row">
				<div class="col-md-6 col-md-offset-2">
					<div class="btn btn-info btn-block btn-lg header-btn">{{show.start_time_tz|date:"l N jS, Y @ P"}}<br/>Theme: {{show.theme}}</div>
				</div>
			</div>
			<div class="row">
				&nbsp;
			</div>
			<div class="row">
				<div class="col-md-6 col-md-offset-2">
					<div class="btn btn-danger btn-block btn-lg header-btn">Player Actions</div>
				</div>
			</div>
			<div class="row">
				&nbsp;
			</div>
			<div class="row">
				<div class="col-sm-1 col-sm-offset-1">
					&nbsp;
				</div>
				{% for player_action in show.player_actions %}
					{% if forloop.counter|divisibleby:"4" %}
					</div>
					<div class="row">
						<div class="col-sm-1 col-sm-offset-1">
							&nbsp;
						</div>
					{% endif %}
					<div class="col-sm-2"> 
						<div class="panel panel-info">
							<div class="panel-header text-center name-header">{{player_action.player.get.name}}</div>
							<div class="panel-body">
								<img src="{{player_image_path}}{{player_action.player.get.photo_filename}}" alt="{{player_action.player.get.name}}" class="img-responsive img-thumbnail">
							</div>
							<div class="panel-footer text-center" style="background-color:black;">{{player_action.action.get.description}}</div>
						</div>
					</div>
				{% endfor %}
			</div>
		{% endif %}
	</div>
{% endblock %}